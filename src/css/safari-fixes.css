/* ========== SAFARI-SPECIFIC FIXES ========== */

/* 1. Fix for -webkit-fill-available (not supported in Safari) */
.navbar {
  backdrop-filter: blur(10px);
  background: transparent;
  box-shadow: none;
  width: 100%; /* Changed from -webkit-fill-available */
  max-width: 100vw; /* Add max-width */
  padding: 0px 5% !important;
  position: fixed !important;
  bottom: 100% !important;
}

/* 2. Fix sidebar width */
@media (min-width: 996px) {
  [aria-label="Docs sidebar"] {
    width: 100% !important; /* Changed from -webkit-fill-available */
    max-width: 300px; /* Add explicit max-width */
  }
}

/* 3. Fix fit-content issues */
code {
  width: fit-content;
  width: -webkit-fit-content;
  width: -moz-fit-content;
  max-height: fit-content;
  max-height: -webkit-fit-content;
  max-height: -moz-fit-content;
  font-family: 'Consolas', 'Courier New', 'monospace' !important;
}

.navbar-sidebar {
  background: var(--ifm-navbar-background-color);
  height: fit-content;
  height: -webkit-fit-content;
  height: -moz-fit-content;
  max-height: 100vh; /* Add max-height for Safari */
  overflow-y: auto; /* Add scroll if needed */
}

.menu__list-item:has(.nav_social_icon) {
  width: fit-content;
  width: -webkit-fit-content;
  width: -moz-fit-content;
  display: inline-flex;
  display: -webkit-inline-flex;
  display: -ms-inline-flexbox;
}

/* 4. Fix anchor-center (not supported in Safari) */
nav {
  align-self: center; /* Changed from anchor-center */
}

.catImageContainer {
  user-select: none;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: float_x2Lw_bX2i 3s ease-in-out infinite;
  transform: translate(10%, 20%);
}

/* 5. Fix max-content issues */
.headerTopSection {
  display: flex;
  flex-direction: row;
  width: 100%;
  min-height: 70vh;
  height: auto; /* Changed from max-content */
  justify-content: flex-end;
}

/* 6. Fix backdrop-filter for Safari */
.navbar {
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  /* Add fallback background for older Safari */
  background: rgba(25, 25, 29, 0.8);
}

/* 7. Fix mobile sidebar issues */
@media (max-width: 996px) {
  .navbar-sidebar {
    position: fixed !important; /* Changed from initial */
    top: 0;
    left: 0;
    right: 0;
    width: 100% !important;
    max-width: 100vw;
    height: 100vh;
    max-height: 100vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
  }

  .navbar-sidebar__items {
    padding: 1rem;
    width: 100%;
    box-sizing: border-box;
  }

  .menu__list-item:has(.nav_social_icon) {
    width: fit-content;
    width: -webkit-fit-content;
    display: inline-flex;
    margin-right: 0.5rem;
  }

  /* Fix for items showing outside screen */
  .navbar__items {
    max-width: 100%;
    overflow-x: hidden;
  }

  .navbar__item {
    max-width: 100%;
  }
}

/* 8. Fix image section on mobile Safari */
@media (max-width: 996px) {
  .imageSection {
    margin: 0 !important;
    padding: 0 !important;
    display: block !important;
    min-height: 0 !important;
    max-height: 0 !important;
    margin-top: 40px !important;
    align-self: center;
    width: 100%;
    overflow: hidden; /* Prevent overflow */
  }

  .catImageContainer {
    position: absolute !important;
    width: 250px !important;
    height: 250px !important;
    margin: 0 auto;
    padding: 0;
    left: 50%;
    transform: translateX(-50%) !important; /* Center properly */
  }

  .catImageContainer::before {
    width: 250px !important;
    height: 250px !important;
    top: 65px !important;
    left: 50%;
    transform: translateX(-50%) !important;
  }
}

/* 9. Fix flexbox issues in Safari */
.navbar__items--left {
  flex: 1 1 auto; /* More explicit flex values */
  min-width: 0; /* Prevent overflow */
}

.navbar__items--right {
  flex: 0 0 auto;
  min-width: 0;
}

/* 10. Fix dropdown positioning */
.dropdown__menu {
  background: var(--ifm-navbar-background-color);
  border: 1px solid rgba(212, 166, 80, 0.3);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  min-width: 140px;
  padding: 8px 0;
  margin-top: 8px;
  position: absolute; /* Ensure proper positioning */
  z-index: 100;
}

/* 11. Fix text rendering on iOS */
* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* 12. Fix button active states on iOS */
.head_button:active,
.btnPrimary:active,
.btnSecondary:active {
  transform: scale(0.95);
  -webkit-transform: scale(0.95);
}

/* 13. Prevent horizontal scroll on mobile */
body {
  overflow-x: hidden;
  max-width: 100vw;
}

html {
  overflow-x: hidden;
  max-width: 100vw;
}

/* 14. Fix sidebar overlay on mobile Safari */
@media (max-width: 996px) {
  .navbar-sidebar__backdrop {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.5);
    z-index: 9;
  }
}